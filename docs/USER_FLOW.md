# SilverSync(실버싱크) 사용자 플로우 문서

> 노인장기요양 시설 · 보호자 간의 정보 동기화 솔루션
> 작성일: 2026-02-06 | 버전: v1.0

---

## 목차

1. [온보딩 플로우](#1-온보딩-플로우)
2. [핵심 시나리오별 사용자 플로우](#2-핵심-시나리오별-사용자-플로우)
3. [화면 흐름도 (Screen Flow)](#3-화면-흐름도-screen-flow)
4. [알림 설계](#4-알림-설계)
5. [에러 핸들링 & 엣지 케이스](#5-에러-핸들링--엣지-케이스)

---

## 1. 온보딩 플로우

### 1.1 시설 등록 플로우

시설 관리자가 SilverSync에 최초 가입하여 시설을 등록하고, 직원 및 어르신을 세팅하는 전체 과정입니다.

```
┌──────────────────────────────────────────────────────────────────────────────────┐
│                           시설 등록 전체 플로우                                     │
│                                                                                  │
│  ① 시설 관리자    ② 시설 정보    ③ 사업자등록증    ④ 승인     ⑤ 승인     ⑥ 직원  │
│     가입 신청   →    입력     →     업로드     →   대기   →   완료   →    초대   │
│                                                                                  │
│                                     ⑦ 어르신    ⑧ 보호자 초대                     │
│                                  →    등록    →   코드 생성                       │
└──────────────────────────────────────────────────────────────────────────────────┘
```

#### 단계별 상세

| 단계 | 화면 | 입력 항목 | 유효성 검사 | 다음 조건 |
|------|------|-----------|-------------|-----------|
| **① 가입 신청** | 회원가입 화면 | 이름, 이메일, 비밀번호, 전화번호 | 이메일 형식, 비밀번호 8자 이상(영문+숫자+특수문자), 전화번호 형식 | 이메일 인증 완료 |
| **② 시설 정보 입력** | 시설 등록 폼 | 시설명, 시설 유형(주간보호/요양원/방문요양), 주소, 대표 전화번호, 정원 수, 시설장 이름 | 필수 항목 입력 여부, 주소 유효성 (주소 검색 API) | 모든 필수 항목 입력 |
| **③ 사업자등록증 업로드** | 서류 업로드 화면 | 사업자등록증 이미지(JPG/PNG/PDF), 장기요양기관 지정서 이미지 | 파일 크기 10MB 이하, 지원 형식 확인 | 파일 업로드 완료 |
| **④ 승인 대기** | 승인 대기 안내 화면 | - | - | 관리자 승인 (1~3 영업일) |
| **⑤ 승인 완료** | 승인 완료 알림 + 대시보드 | - | - | 푸시 알림 + 이메일 발송 |
| **⑥ 직원 초대** | 직원 관리 화면 | 직원 이름, 이메일/전화번호, 역할(요양보호사/간호사/사회복지사/운전기사/관리자) | 이메일 또는 전화번호 필수 | 초대 발송 완료 |
| **⑦ 어르신 등록** | 어르신 등록 폼 | 이름, 생년월일, 성별, 장기요양등급, 주요 질환, 투약 정보, 비상 연락처, 사진 | 생년월일 형식, 장기요양등급 1~5등급+인지지원등급 | 필수 항목 입력 |
| **⑧ 보호자 초대 코드 생성** | 초대 코드 발급 화면 | 보호자 이름, 관계(자녀/배우자/기타), 전화번호 | 전화번호 형식 | 6자리 영숫자 초대 코드 생성, SMS 자동 발송 |

#### 시설 등록 시퀀스 다이어그램

```
시설 관리자          SilverSync 서버         SilverSync 관리자
    │                      │                      │
    │── 회원가입 요청 ──────>│                      │
    │<── 이메일 인증 발송 ──│                      │
    │── 이메일 인증 완료 ──>│                      │
    │── 시설 정보 입력 ────>│                      │
    │── 사업자등록증 업로드 ->│                      │
    │<── 승인 대기 안내 ────│                      │
    │                      │── 승인 요청 알림 ────>│
    │                      │<── 승인 처리 ─────────│
    │<── 승인 완료 알림 ────│                      │
    │    (푸시+이메일)      │                      │
    │── 직원 초대 ─────────>│                      │
    │── 어르신 등록 ───────>│                      │
    │── 보호자 초대코드 요청>│                      │
    │<── 초대코드 생성+SMS ─│                      │
    │                      │                      │
```

#### 승인 거절 시 플로우

```
승인 거절 → 사유 안내 이메일/푸시 발송 → 시설 관리자 서류 재제출 → 재심사
                                         └→ 문의하기 (고객센터 연결)
```

---

### 1.2 보호자 가입 플로우

시설로부터 초대 코드를 받은 보호자가 앱을 설치하고 어르신과 연결하는 과정입니다.

```
┌──────────────────────────────────────────────────────────────────────────┐
│                        보호자 가입 플로우                                  │
│                                                                          │
│  ① 앱        ② 전화번호     ③ 초대 코드    ④ 어르신    ⑤ 알림    ⑥ 완료 │
│    다운로드 →    인증    →     입력     →    연결   →   설정  →         │
└──────────────────────────────────────────────────────────────────────────┘
```

#### 단계별 상세

| 단계 | 화면 | 설명 | 소요 시간 |
|------|------|------|-----------|
| **① 앱 다운로드** | 앱스토어/플레이스토어 | SMS 내 다운로드 링크 클릭, 딥링크로 초대 코드 자동 입력 가능 | - |
| **② 전화번호 인증** | 전화번호 입력 + OTP 화면 | 전화번호 입력 → 6자리 OTP 수신 (60초 제한) → 인증 완료. 3회 실패 시 5분 대기. | 30초 |
| **③ 초대 코드 입력** | 초대 코드 입력 화면 | 시설에서 발급한 6자리 영숫자 코드 입력. 유효기간 72시간. 만료 시 시설에 재발급 요청 안내. | 10초 |
| **④ 어르신 연결** | 어르신 정보 확인 화면 | 어르신 이름(일부 마스킹), 시설명, 관계 표시. 보호자가 "연결 확인" 탭. 복수 어르신 연결 가능(코드 추가 입력). | 10초 |
| **⑤ 알림 설정** | 알림 권한 요청 + 알림 종류 선택 | OS 푸시 권한 요청. 알림 종류별 On/Off: 일과 보고, 복약 알림, 송영 알림, 긴급 알림(필수-해제 불가), 공지사항 | 20초 |
| **⑥ 완료** | 온보딩 완료 + 홈 화면 | 환영 메시지, 주요 기능 투어(스와이프 3장), "시작하기" 버튼 | 15초 |

#### 보호자 가입 시퀀스 다이어그램

```
보호자                 SilverSync 서버           시설 관리자
  │                        │                        │
  │── 앱 설치 + 실행 ──────>│                        │
  │── 전화번호 입력 ───────>│                        │
  │<── OTP 발송 (SMS) ─────│                        │
  │── OTP 인증 ───────────>│                        │
  │<── 인증 성공 ──────────│                        │
  │── 초대 코드 입력 ──────>│                        │
  │                        │── 코드 유효성 검증 ────>│
  │<── 어르신 정보 표시 ───│                        │
  │── 연결 확인 ──────────>│                        │
  │                        │── 보호자 연결 알림 ───>│
  │<── 알림 설정 화면 ─────│                        │
  │── 알림 설정 완료 ──────>│                        │
  │<── 홈 화면 진입 ───────│                        │
  │                        │                        │
```

#### 초대 코드 정책

| 항목 | 규칙 |
|------|------|
| 코드 형식 | 영문 대문자 + 숫자 6자리 (예: `A3K9F2`) |
| 유효기간 | 생성 후 72시간 |
| 사용 횟수 | 1회 사용 가능 (사용 후 즉시 만료) |
| 재발급 | 시설 관리자가 무제한 재발급 가능 |
| 보안 | 5회 잘못된 코드 입력 시 30분 입력 차단 |

---

### 1.3 직원 가입 플로우

시설 관리자가 직원을 초대하면, 직원이 앱을 설치하고 역할을 부여받는 과정입니다.

```
┌────────────────────────────────────────────────────────────────────────┐
│                         직원 가입 플로우                                 │
│                                                                        │
│  ① 시설 관리자   ② 이메일/전화번호   ③ 역할     ④ 앱         ⑤ 완료  │
│     초대     →      인증        →    배정   →   튜토리얼  →          │
└────────────────────────────────────────────────────────────────────────┘
```

#### 단계별 상세

| 단계 | 화면 | 설명 |
|------|------|------|
| **① 시설 관리자 초대** | 직원 관리 화면 (관리자 측) | 관리자가 직원 이름, 연락처, 역할을 입력하여 초대 발송. 이메일 또는 SMS로 앱 다운로드 링크 + 초대 토큰 전달. |
| **② 이메일/전화번호 인증** | 인증 화면 (직원 측) | 초대 링크로 앱 진입 → 전화번호 OTP 인증 또는 이메일 인증. 기존 계정이 있으면 로그인 후 시설 연결. |
| **③ 역할 배정** | 역할 확인 화면 | 관리자가 지정한 역할 표시(요양보호사/간호사/사회복지사/운전기사/관리자). 직원이 확인 후 수락. 역할에 따라 앱 내 접근 권한이 달라짐. |
| **④ 앱 튜토리얼** | 튜토리얼 화면 (역할별 맞춤) | 역할에 맞는 주요 기능 소개 (3~5장 스와이프). 요양보호사: 일과 보고/복약 관리 중심. 운전기사: 송영 관리 중심. 간호사: 건강 기록 중심. |
| **⑤ 완료** | 온보딩 완료 + 홈 대시보드 | 담당 어르신 배정 안내, 오늘의 업무 요약 표시 |

#### 역할별 권한 매트릭스

| 기능 | 시설장/관리자 | 사회복지사 | 요양보호사 | 간호사 | 운전기사 |
|------|:---:|:---:|:---:|:---:|:---:|
| 어르신 등록/수정 | O | O | X | X | X |
| 일과 보고 작성 | O | O | O | O | X |
| 복약 기록 | O | O | O | O | X |
| 건강 기록 작성 | O | O | X | O | X |
| 송영 관리 | O | O | X | X | O |
| 보호자 메시지 응답 | O | O | O | O | X |
| 직원 초대/관리 | O | X | X | X | X |
| 보호자 초대 코드 발급 | O | O | X | X | X |
| 공지사항 작성 | O | O | X | X | X |
| 프로그램 관리 | O | O | X | X | X |
| 식단 관리 | O | O | X | X | X |
| 통계/리포트 조회 | O | O | X | O | X |

---

## 2. 핵심 시나리오별 사용자 플로우

### 시나리오 1: 아침 송영 (등원)

어르신을 자택에서 시설까지 모시고 오는 전체 프로세스입니다.

#### 타임라인 개요

```
06:30  운전기사 출근, 차량 점검
07:00  운행 시작, 보호자에게 출발 알림
07:15  첫 번째 어르신 자택 도착
07:20  탑승 완료, 보호자에게 탑승 알림
  ...  (순차 픽업)
08:30  시설 도착, 전원 하차 완료
08:35  보호자에게 도착 알림, 시설 직원 인수 확인
```

#### 운전기사 화면 흐름

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  홈 대시보드  │───>│ 오늘 송영    │───>│ 운행 시작    │───>│ 경로 안내    │
│             │    │ 스케줄 확인  │    │ 버튼 탭     │    │ (네이버 지도) │
└─────────────┘    └─────────────┘    └─────────────┘    └──────┬──────┘
                                                                │
     ┌──────────────────────────────────────────────────────────┘
     ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 어르신 자택  │───>│ 탑승 체크    │───>│ 다음 경유지  │───>│ 시설 도착    │
│ 도착 알림   │    │ (스와이프)   │    │ 이동        │    │ 전원 하차    │
└─────────────┘    └─────────────┘    └─────────────┘    └──────┬──────┘
                                                                │
                                                                ▼
                                                        ┌─────────────┐
                                                        │ 운행 완료    │
                                                        │ 리포트 확인  │
                                                        └─────────────┘
```

**운전기사 상세 플로우:**

1. **출근 및 차량 점검** (06:30)
   - 앱 로그인 → 홈 대시보드에서 "오늘 송영 스케줄" 카드 확인
   - 차량 상태 체크리스트: 시동, 에어컨/히터, 안전벨트, 휠체어 리프트 작동 여부
   - 체크 완료 시 "차량 준비 완료" 상태 전환

2. **운행 시작** (07:00)
   - "운행 시작" 버튼 탭 → GPS 추적 활성화
   - 경유지 순서가 표시된 네이버 지도 네비게이션 실행
   - **보호자에게 자동 푸시 알림**: "[시설명] 송영 차량이 출발했습니다. 예상 도착 시간: 07:15"

3. **어르신 자택 도착** (07:15)
   - GPS 기반 자동 도착 감지 (반경 100m 이내) 또는 수동 "도착" 버튼
   - **보호자에게 자동 푸시 알림**: "송영 차량이 도착했습니다"
   - 대기 타이머 시작 (최대 5분)

4. **탑승 체크** (07:20)
   - 어르신 목록에서 탑승 어르신 스와이프 → "탑승 완료"
   - 특이사항 메모 입력 가능 (예: "오늘 컨디션 좋지 않아 보임")
   - **보호자에게 자동 푸시 알림**: "[어르신 성함]님이 탑승하셨습니다"
   - 미탑승 시: "불참" 처리 → 사유 선택 (외출/병원/개인사정/기타) → 보호자+시설에 알림

5. **시설 도착** (08:30)
   - GPS 기반 시설 도착 자동 감지
   - 하차 체크: 전원 하차 확인 스와이프
   - **보호자에게 자동 푸시 알림**: "[어르신 성함]님이 [시설명]에 안전하게 도착했습니다"
   - 운행 리포트 자동 생성: 총 소요 시간, 탑승 인원, 특이사항

#### 보호자 화면 흐름

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 푸시 알림     │───>│ 송영 현황     │───>│ 실시간 위치   │───>│ 도착 알림     │
│ "차량 출발"   │    │ 화면 진입     │    │ 지도 확인    │    │ "안전 도착"   │
└──────────────┘    └──────────────┘    └──────────────┘    └──────────────┘
```

**보호자가 받는 알림 타임라인:**

| 시각 | 알림 내용 | 알림 유형 |
|------|-----------|-----------|
| 07:00 | "송영 차량이 출발했습니다. 예상 도착: 07:15" | 푸시 |
| 07:15 | "송영 차량이 자택 근처에 도착했습니다" | 푸시 |
| 07:20 | "[어르신]님이 탑승하셨습니다" | 푸시 |
| 08:30 | "[어르신]님이 [시설]에 안전하게 도착했습니다" | 푸시 |

**보호자 앱 내 송영 화면 기능:**
- 실시간 차량 위치 지도 표시 (5초 간격 갱신)
- 예상 도착 시간 (ETA) 표시
- 운전기사에게 전화 연결 버튼
- 과거 송영 기록 조회

#### 시설 직원 화면 흐름

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 홈 대시보드   │───>│ 송영 현황     │───>│ 도착 어르신   │
│ 송영 카드    │    │ 차량별 위치   │    │ 인수 확인     │
└──────────────┘    └──────────────┘    └──────────────┘
```

**시설 직원 상세:**
- 대시보드에서 "오늘 등원 현황" 카드: 예정 인원, 탑승 완료, 미탑승 실시간 표시
- 차량 도착 시: 인수 확인 체크 → "어르신 [이름] 인수 완료"
- 미등원 어르신 목록 별도 표시, 보호자 연락 필요 여부 안내

---

### 시나리오 2: 복약 관리

어르신의 약 복용을 관리하고 보호자에게 확인시켜 주는 전체 프로세스입니다.

#### 복약 관리 전체 플로우

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│ 복약 시간 │───>│ 직원     │───>│ 복약     │───>│ 사진     │───>│ 보호자   │
│ 도래     │    │ 알림 수신 │    │ 기록 입력 │    │ 촬영     │    │ 확인     │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
       │
       │ (미복약 시)
       ▼
┌──────────┐    ┌──────────┐    ┌──────────┐
│ 10분 경과 │───>│ 리마인더 │───>│ 30분 경과│───> 시설 관리자 에스컬레이션
│          │    │ 재알림   │    │ 미복약   │
└──────────┘    └──────────┘    └──────────┘
```

#### 시간대별 상세 플로우

**08:30 - 아침 복약 시간 도래**

```
시스템              직원(요양보호사)         보호자
  │                      │                    │
  │── 복약 알림 푸시 ───>│                    │
  │   "08:30 아침 복약   │                    │
  │    대상: 5명"        │                    │
  │                      │                    │
  │                      │── 복약 관리 화면 ──>│
  │                      │   진입              │
  │                      │                    │
  │   [어르신별 복약 진행]│                    │
  │                      │                    │
  │<── 복약 완료 체크 ───│                    │
  │<── 복약 사진 업로드 ─│                    │
  │<── 특이사항 메모 ────│                    │
  │    (구토, 거부 등)   │                    │
  │                      │                    │
  │── 복약 확인 알림 ──────────────────────>│
  │   "[어르신] 아침 약  │                    │
  │    복약 완료 (사진)" │                    │
  │                      │                    │
```

#### 직원 복약 기록 화면 흐름

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 복약 알림     │───>│ 오늘 복약     │───>│ 어르신 선택   │
│ 탭하여 진입   │    │ 리스트       │    │             │
└──────────────┘    └──────────────┘    └──────┬───────┘
                                               │
     ┌─────────────────────────────────────────┘
     ▼
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 약 목록 확인  │───>│ 복약 체크     │───>│ 사진 촬영     │
│ (약 이름,    │    │ ○ 완료       │    │ (복약 장면   │
│  용량, 용법) │    │ ○ 거부       │    │  또는 약 봉투)│
└──────────────┘    │ ○ 절반 복용   │    └──────┬───────┘
                    │ ○ 기타       │           │
                    └──────────────┘           │
                                               ▼
                                        ┌──────────────┐
                                        │ 특이사항 메모  │───> 저장 완료
                                        │ (선택 입력)   │     보호자 자동 발송
                                        └──────────────┘
```

#### 복약 상태 유형

| 상태 | 아이콘 | 설명 | 보호자 알림 |
|------|--------|------|------------|
| **복약 완료** | 초록 체크 | 정상 복약 | "복약 완료" 알림 + 사진 |
| **복약 거부** | 빨간 X | 어르신이 약 복용 거부 | "복약 거부" 알림 + 사유 |
| **절반 복용** | 노란 삼각 | 일부만 복용 | "일부 복약" 알림 + 사유 |
| **미복약** | 회색 시계 | 아직 복약하지 않음 | 30분 경과 시 "미복약" 알림 |
| **대체 투약** | 파란 교체 | 약 변경 (간호사 판단) | "약 변경 투약" 알림 + 사유 |

#### 미복약 에스컬레이션 플로우

```
복약 시간 도래
    │
    ├── 즉시: 담당 요양보호사에게 푸시 알림
    │
    ├── +10분: 리마인더 재알림 (담당 요양보호사)
    │
    ├── +20분: 담당 간호사에게 추가 알림
    │
    ├── +30분: 시설 관리자에게 에스컬레이션 알림
    │          보호자에게 "미복약 알림" 발송
    │
    └── +60분: 미복약 확정 기록
              보호자에게 최종 알림 + 사유 요청
```

#### 보호자 복약 확인 화면

```
┌──────────────┐    ┌──────────────┐
│ 푸시 알림     │───>│ 복약 상세     │
│ "아침 복약    │    │              │
│  완료"       │    │ - 약 이름    │
└──────────────┘    │ - 복약 시간   │
                    │ - 사진       │
                    │ - 특이사항    │
                    │              │
                    │ [확인] 버튼   │
                    └──────────────┘
```

---

### 시나리오 3: 일과 보고 작성

직원이 하루 동안 어르신의 활동을 기록하고 보호자에게 발송하는 프로세스입니다.

#### 일과 보고 전체 플로우

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│ 일과 중   │───>│ 퇴근 전   │───>│ 컨디션/  │───>│ 텍스트   │───>│ 보호자   │
│ 사진 촬영 │    │ 보고 작성 │    │ 기분/식욕 │    │ 작성     │    │ 자동 발송│
│          │    │          │    │ 선택     │    │          │    │          │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
```

#### 일과 중 사진 촬영 (수시)

직원은 하루 중 어르신의 활동 장면을 수시로 촬영하여 임시 저장합니다.

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 홈 대시보드   │───>│ 빠른 사진     │───>│ 어르신 태그   │
│ 카메라 FAB   │    │ 촬영 화면     │    │ 선택         │
│ 버튼 탭     │    │              │    │ (복수 선택)   │
└──────────────┘    └──────────────┘    └──────┬───────┘
                                               │
                                               ▼
                                        ┌──────────────┐
                                        │ 활동 카테고리  │───> 임시 저장
                                        │ 선택          │     (일과 보고용)
                                        │ - 프로그램    │
                                        │ - 식사       │
                                        │ - 산책       │
                                        │ - 휴식       │
                                        │ - 기타       │
                                        └──────────────┘
```

#### 퇴근 전 일과 보고 작성 (16:00~17:00)

```
직원(요양보호사)                    시스템                    보호자
      │                              │                        │
      │<── 16:00 일과보고 작성       │                        │
      │    리마인더 알림              │                        │
      │                              │                        │
      │── 일과 보고 작성 화면 진입 ──>│                        │
      │                              │                        │
      │   [어르신 선택]              │                        │
      │   [오늘 촬영 사진 자동 첨부] │                        │
      │   [컨디션 선택: 좋음/보통/   │                        │
      │    안좋음]                   │                        │
      │   [기분 선택: 즐거움/평온/   │                        │
      │    우울/불안]                │                        │
      │   [식욕 선택: 좋음/보통/     │                        │
      │    부진]                     │                        │
      │   [프로그램 참여 체크]       │                        │
      │   [텍스트 작성]              │                        │
      │                              │                        │
      │── 보고서 저장 ──────────────>│                        │
      │                              │── 보호자 자동 발송 ──>│
      │                              │   (푸시 + 인앱)        │
      │<── 발송 완료 확인 ──────────│                        │
      │                              │                        │
```

#### 일과 보고 작성 화면 구성

```
┌──────────────────────────────────────┐
│          일과 보고 작성               │
│  ────────────────────────────────    │
│                                      │
│  어르신: [김OO] 어르신     [변경]     │
│  날짜: 2026-02-06 (금)              │
│                                      │
│  ── 오늘의 컨디션 ──────────────     │
│  [ 좋음 ]  [ 보통 ]  [안좋음]       │
│     😊        😐        😟          │
│                                      │
│  ── 기분 상태 ──────────────────     │
│  [즐거움] [평온] [우울] [불안] [기타] │
│                                      │
│  ── 식욕 ──────────────────────     │
│  [ 좋음 ]  [ 보통 ]  [ 부진 ]       │
│  아침: [  전체  ▼]                   │
│  점심: [  2/3   ▼]                   │
│  간식: [  전체  ▼]                   │
│                                      │
│  ── 프로그램 참여 ─────────────     │
│  [v] 오전 체조 (09:00)              │
│  [v] 인지 활동 (10:30)              │
│  [ ] 미술 치료 (14:00) - 불참       │
│  [v] 노래교실 (15:00)               │
│                                      │
│  ── 오늘의 사진 ───────────────     │
│  [사진1] [사진2] [사진3] [+추가]    │
│                                      │
│  ── 보호자에게 전할 말 ────────     │
│  ┌──────────────────────────────┐   │
│  │ 오늘 김OO 어르신께서는        │   │
│  │ 인지 활동에 적극적으로         │   │
│  │ 참여하셨습니다. 점심은 2/3    │   │
│  │ 정도 드셨고, 오후에는 노래    │   │
│  │ 교실에서 즐겁게 활동하셨...   │   │
│  └──────────────────────────────┘   │
│                                      │
│  [임시저장]              [발송하기]   │
│                                      │
└──────────────────────────────────────┘
```

#### 보호자가 받는 일과 보고

```
┌──────────────────────────────────────┐
│        오늘의 일과 보고               │
│  2026-02-06 (금) | [시설명]          │
│  ────────────────────────────────    │
│                                      │
│  김OO 어르신                         │
│                                      │
│  컨디션: 좋음 ●●●○○                 │
│  기분:   즐거움 😊                   │
│  식욕:   보통                        │
│                                      │
│  ── 식사 ──────────────────────     │
│  아침 ████████████ 전체              │
│  점심 ████████░░░░ 2/3              │
│  간식 ████████████ 전체              │
│                                      │
│  ── 프로그램 참여 ─────────────     │
│  ✓ 오전 체조 | ✓ 인지 활동          │
│  ✗ 미술 치료 | ✓ 노래교실           │
│                                      │
│  ── 사진 ──────────────────────     │
│  [  사진1  ] [  사진2  ] [사진3]    │
│                                      │
│  ── 담당자 메모 ───────────────     │
│  "오늘 김OO 어르신께서는 인지        │
│   활동에 적극적으로 참여하셨습니다..." │
│                                      │
│  담당: 이OO 요양보호사               │
│                                      │
│  [답장하기]    [감사 인사 보내기]     │
│                                      │
└──────────────────────────────────────┘
```

#### 일과 보고 미작성 에스컬레이션

| 시점 | 대상 | 알림 내용 |
|------|------|-----------|
| 16:00 | 담당 직원 | "일과 보고 작성 시간입니다" 리마인더 |
| 17:00 | 담당 직원 | "아직 작성하지 않은 일과 보고가 있습니다" 재알림 |
| 17:30 | 담당 직원 + 관리자 | "미작성 보고가 있습니다" 에스컬레이션 |
| 18:00 | 관리자 | "금일 미발송 보고 목록" 최종 알림 |

---

### 시나리오 4: 보호자-시설 소통

보호자와 시설 직원 간의 메시지 소통 플로우입니다.

#### 일반 메시지 플로우

```
보호자                   SilverSync 서버              시설 직원
  │                           │                          │
  │── 메시지 발송 ───────────>│                          │
  │   "내일 병원 예약이 있어  │                          │
  │    오전에 못 갑니다"      │                          │
  │                           │── 푸시 알림 ────────────>│
  │                           │   "보호자 메시지 도착"    │
  │                           │                          │
  │                           │<── 메시지 읽음 ──────────│
  │<── 읽음 확인 표시 ───────│                          │
  │   (체크 2개 표시)         │                          │
  │                           │                          │
  │                           │<── 답변 작성 ────────────│
  │<── 답변 푸시 알림 ───────│   "네, 확인했습니다.     │
  │   "시설에서 답변이        │    내일 불참 처리         │
  │    도착했습니다"          │    하겠습니다"            │
  │                           │                          │
  │── 읽음 ─────────────────>│                          │
  │                           │── 읽음 확인 ────────────>│
  │                           │                          │
```

#### 메시지 화면 흐름 (보호자 앱)

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 하단 탭       │───>│ 대화 목록     │───>│ 1:1 채팅     │
│ "소통" 탭    │    │              │    │ 화면         │
└──────────────┘    │ - 담당 직원   │    │              │
                    │ - 시설 공지   │    │ [텍스트 입력] │
                    │ - 긴급 연락   │    │ [사진 첨부]   │
                    └──────────────┘    │ [전송]       │
                                        └──────────────┘
```

#### 메시지 유형 및 처리

| 메시지 유형 | 발신자 | 수신자 | 응답 기한 | 미응답 시 |
|------------|--------|--------|-----------|----------|
| **일반 문의** | 보호자 | 담당 직원 | 24시간 | 관리자에게 에스컬레이션 |
| **일정 변경** | 보호자 | 담당 직원 + 관리자 | 4시간 | 자동 리마인더 |
| **건강 관련** | 보호자 | 간호사 + 관리자 | 2시간 | 관리자 긴급 알림 |
| **공지사항** | 시설 | 전체 보호자 | - | - |
| **가정통신문** | 시설 | 전체 보호자 | - | 미확인자 리마인더 |
| **긴급 메시지** | 보호자 | 관리자 + 담당 전원 | 30분 | SMS + 전화 에스컬레이션 |

#### 읽음 확인 시스템

```
메시지 상태 표시:
  ✓   전송 완료 (서버 수신)
  ✓✓  상대방 읽음
  🕐  전송 중 (네트워크 지연)
  ❌  전송 실패 (재전송 버튼)
```

#### 긴급 상황 시 소통 에스컬레이션

```
보호자 "긴급" 메시지 발송
        │
        ├── 즉시: 시설 관리자 + 담당 직원 전원 푸시 알림
        │         (소리 알림 강제, 무음 모드 무시)
        │
        ├── +5분 미확인: SMS 발송 (관리자 전화번호)
        │
        ├── +10분 미확인: 자동 전화 연결 시도 (관리자)
        │
        └── +15분 미확인: 비상 연락망 순차 호출
```

---

### 시나리오 5: 긴급 상황 대응

어르신에게 이상 상황이 발생했을 때의 대응 플로우입니다.

#### 긴급 상황 전체 플로우

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│ 어르신   │───>│ 시설     │───>│ 보호자   │───>│ 상황     │───>│ 후속     │
│ 이상 감지│    │ 관리자   │    │ 긴급     │    │ 기록     │    │ 조치     │
│          │    │ 알림     │    │ 연락     │    │          │    │          │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
```

#### 상세 시퀀스 다이어그램

```
직원(발견자)        시설 관리자         SilverSync 서버        보호자
    │                   │                    │                   │
    │── 긴급 상황 신고 ──────────────────>│                   │
    │   (유형 선택:      │                    │                   │
    │    낙상/발열/호흡곤란│                   │                   │
    │    /의식저하/기타)  │                    │                   │
    │                   │                    │                   │
    │                   │<── 긴급 알림 ──────│                   │
    │                   │   (사이렌 알림음)   │                   │
    │                   │                    │── 긴급 푸시 ────>│
    │                   │                    │   (최우선 알림)    │
    │                   │                    │                   │
    │                   │                    │   +1분 미확인 시   │
    │                   │                    │── SMS 발송 ─────>│
    │                   │                    │                   │
    │                   │                    │   +3분 미확인 시   │
    │                   │                    │── 자동 전화 ────>│
    │                   │                    │   연결 시도        │
    │                   │                    │                   │
    │   [상황 기록 진행] │                    │                   │
    │── 상황 실시간 ──────────────────────>│                   │
    │   업데이트         │                    │── 실시간 공유 ──>│
    │                   │                    │                   │
    │── 후속 조치 기록 ──────────────────>│                   │
    │   (119 호출,       │                    │── 후속 조치 ────>│
    │    병원 이송 등)   │                    │   알림             │
    │                   │                    │                   │
```

#### 긴급 상황 유형별 대응 프로토콜

| 유형 | 심각도 | 즉시 조치 | 보호자 알림 채널 | 외부 연락 |
|------|--------|-----------|-----------------|-----------|
| **낙상** | 높음 | 이동 금지, 간호사 호출 | 푸시 + SMS + 전화 | 필요시 119 |
| **발열 (38도 이상)** | 중간 | 체온 재측정, 간호사 판단 | 푸시 + SMS | 필요시 병원 |
| **호흡 곤란** | 최고 | 자세 조정, 119 호출 | 푸시 + SMS + 전화 | 119 즉시 |
| **의식 저하** | 최고 | 119 호출, 기도 확보 | 푸시 + SMS + 전화 | 119 즉시 |
| **구토/설사** | 중간 | 간호사 호출, 기록 | 푸시 + SMS | 필요시 병원 |
| **배회/실종** | 높음 | 시설 내 수색, 출입 기록 확인 | 푸시 + SMS + 전화 | 필요시 112 |
| **이상 행동** | 중간 | 안전 확보, 관리자 보고 | 푸시 | - |
| **기타** | 직원 판단 | 상황에 따라 | 푸시 | 상황에 따라 |

#### 긴급 상황 기록 화면

```
┌──────────────────────────────────────┐
│        긴급 상황 기록                  │
│  ────────────────────────────────    │
│                                      │
│  어르신: 김OO (여, 82세)             │
│  발생 시각: 2026-02-06 14:23        │
│  발견자: 이OO 요양보호사             │
│                                      │
│  ── 상황 유형 ─────────────────     │
│  (*) 낙상  ( ) 발열  ( ) 호흡곤란    │
│  ( ) 의식저하  ( ) 배회  ( ) 기타    │
│                                      │
│  ── 상황 설명 ─────────────────     │
│  ┌──────────────────────────────┐   │
│  │ 화장실 이동 중 미끄러져       │   │
│  │ 넘어지심. 오른쪽 엉덩이       │   │
│  │ 부위 통증 호소.               │   │
│  └──────────────────────────────┘   │
│                                      │
│  ── 현재 상태 ─────────────────     │
│  의식: [명확 ▼]                      │
│  통증: [있음 - 오른쪽 고관절 ▼]      │
│  출혈: [없음 ▼]                      │
│  이동: [불가 ▼]                      │
│                                      │
│  ── 사진/동영상 ───────────────     │
│  [촬영하기]  [갤러리에서 선택]       │
│                                      │
│  ── 조치 사항 ─────────────────     │
│  [v] 간호사 호출                     │
│  [v] 시설 관리자 보고                │
│  [ ] 119 호출                        │
│  [ ] 보호자 직접 전화                │
│  [ ] 병원 이송                       │
│                                      │
│  [임시저장]         [보고 및 알림]    │
│                                      │
└──────────────────────────────────────┘
```

#### 보호자 긴급 알림 화면

```
┌──────────────────────────────────────┐
│   ⚠ 긴급 알림                        │
│  ────────────────────────────────    │
│                                      │
│  김OO 어르신 긴급 상황 발생           │
│                                      │
│  유형: 낙상                           │
│  시각: 2026-02-06 14:23              │
│  장소: [시설명] 2층 화장실 앞         │
│                                      │
│  현재 상태:                           │
│  - 의식 명확                          │
│  - 오른쪽 고관절 통증 호소            │
│  - 간호사 확인 중                     │
│                                      │
│  ── 실시간 업데이트 ──────────       │
│  14:23 낙상 발생, 간호사 호출         │
│  14:25 간호사 도착, 상태 확인 중      │
│  14:30 병원 이송 결정                 │
│  14:35 OO병원 응급실 이송 출발        │
│                                      │
│  [시설에 전화하기]  [확인]            │
│                                      │
└──────────────────────────────────────┘
```

#### 긴급 상황 종료 후 플로우

```
긴급 상황 종료
    │
    ├── 결과 기록: 조치 내용, 결과, 이송 여부, 병원명
    │
    ├── 보호자 최종 보고: "상황 종료" 알림 + 상세 보고서
    │
    ├── 관리자 보고서: 사고 보고서 자동 생성 (법적 기록용)
    │
    └── 후속 관리: 관찰 주기 설정 (예: 2시간마다 상태 체크 알림)
```

---

## 3. 화면 흐름도 (Screen Flow)

### 3.1 시설 앱 화면 트리

```
로그인 / 가입
├── 이메일 로그인
├── 전화번호 로그인
├── 비밀번호 찾기
└── 회원가입 (시설 등록 플로우로 연결)

홈 대시보드
├── 오늘 요약 카드
│   ├── 등원 현황 (12/15명)
│   ├── 복약 현황 (8/12건 완료)
│   ├── 일과 보고 현황 (3/15건 작성)
│   └── 미확인 메시지 (2건)
│
├── 송영 관리
│   ├── 오늘 스케줄
│   │   ├── 등원 스케줄 (시간대, 어르신 목록)
│   │   └── 하원 스케줄 (시간대, 어르신 목록)
│   ├── 차량별 현황
│   │   ├── 차량 A (운전기사: OOO)
│   │   │   ├── 배차 어르신 목록
│   │   │   ├── 실시간 위치
│   │   │   └── 탑승 상태
│   │   └── 차량 B (운전기사: OOO)
│   │       └── (동일 구조)
│   ├── 탑승 체크
│   │   ├── 어르신 목록 (탑승/미탑승 토글)
│   │   ├── 탑승 시 특이사항 메모
│   │   └── 불참 사유 선택
│   └── 운행 히스토리
│       ├── 날짜별 운행 기록
│       ├── 운행 리포트 상세
│       └── 운행 통계 (월간)
│
├── 복약 관리
│   ├── 오늘 복약 리스트
│   │   ├── 시간대별 그룹 (아침/점심/저녁/취침전)
│   │   ├── 어르신별 복약 상태 (완료/미완료/거부)
│   │   └── 전체 진행률 프로그레스 바
│   ├── 복약 기록 (사진 포함)
│   │   ├── 어르신 선택
│   │   ├── 약 목록 확인 (이름, 용량, 용법)
│   │   ├── 복약 상태 선택 (완료/거부/절반/기타)
│   │   ├── 사진 촬영 (복약 장면)
│   │   └── 특이사항 메모
│   ├── 복약 통계
│   │   ├── 어르신별 복약률 (일간/주간/월간)
│   │   ├── 미복약/거부 이력
│   │   └── 차트 (fl_chart)
│   └── 약 정보 관리
│       ├── 어르신별 처방 약 목록
│       ├── 약 추가/수정/삭제
│       ├── 복약 시간 설정
│       └── 약 사진 등록
│
├── 어르신 관리
│   ├── 어르신 목록
│   │   ├── 검색 (이름, 등급)
│   │   ├── 필터 (등급별, 상태별)
│   │   └── 정렬 (이름순, 등급순)
│   ├── 어르신 상세 프로필
│   │   ├── 기본 정보 (이름, 생년월일, 성별, 사진)
│   │   ├── 장기요양 등급 및 인정 번호
│   │   ├── 주요 질환 및 특이사항
│   │   ├── 투약 정보
│   │   ├── 식이 정보 (알레르기, 식이 제한)
│   │   └── 비상 연락처
│   ├── 건강 기록
│   │   ├── 활력 징후 기록 (혈압, 맥박, 체온, 체중)
│   │   ├── 건강 이력 타임라인
│   │   ├── 병원 방문 기록
│   │   └── 건강 트렌드 차트
│   └── 보호자 정보
│       ├── 연결된 보호자 목록
│       ├── 보호자 연락처
│       └── 초대 코드 재발급
│
├── 소통
│   ├── 대화 목록
│   │   ├── 최근 대화 (보호자별)
│   │   ├── 읽지 않은 메시지 배지
│   │   └── 검색
│   ├── 1:1 채팅
│   │   ├── 텍스트 메시지
│   │   ├── 사진 전송
│   │   ├── 읽음 확인
│   │   └── 긴급 메시지 표시
│   ├── 공지사항 관리
│   │   ├── 공지 목록
│   │   ├── 공지 작성 (제목, 본문, 첨부파일)
│   │   ├── 대상 선택 (전체/특정 보호자)
│   │   └── 확인 현황 (읽음/미읽음)
│   └── 가정통신문
│       ├── 통신문 목록
│       ├── 통신문 작성 (템플릿 활용)
│       └── 발송 이력
│
├── 일과 보고
│   ├── 보고서 작성
│   │   ├── 어르신 선택
│   │   ├── 컨디션/기분/식욕 선택
│   │   ├── 프로그램 참여 체크
│   │   ├── 텍스트 작성
│   │   └── 사진 첨부 (일과 중 촬영분 자동 로드)
│   ├── 사진 업로드
│   │   ├── 카메라 촬영
│   │   ├── 갤러리 선택
│   │   ├── 어르신 태그
│   │   └── 활동 카테고리 선택
│   └── 보고서 이력
│       ├── 날짜별 보고서 목록
│       ├── 보고서 상세 보기
│       └── 보호자 확인 여부
│
├── 프로그램 관리
│   ├── 프로그램 목록
│   │   ├── 오늘의 프로그램
│   │   ├── 주간 프로그램 일정
│   │   └── 프로그램 상세 (이름, 시간, 장소, 담당자)
│   ├── 참여 기록
│   │   ├── 프로그램별 참여 어르신 체크
│   │   ├── 참여 사진 촬영
│   │   └── 참여 후기/특이사항
│   └── 프로그램 등록
│       ├── 프로그램 정보 입력
│       ├── 반복 일정 설정
│       └── 대상 어르신 선택
│
├── 식단 관리
│   ├── 주간 식단표
│   │   ├── 일자별 아침/점심/저녁/간식
│   │   ├── 식단 사진
│   │   └── 영양 정보
│   └── 식단 등록
│       ├── 메뉴 입력
│       ├── 사진 업로드
│       ├── 영양 정보 입력 (선택)
│       └── 주간 일괄 등록
│
├── 알림
│   ├── 전체 알림 목록
│   ├── 유형별 필터 (긴급/송영/복약/메시지/일반)
│   └── 읽음/안읽음 필터
│
└── 설정
    ├── 시설 정보
    │   ├── 시설 기본 정보 수정
    │   ├── 운영 시간 설정
    │   └── 시설 사진 관리
    ├── 직원 관리
    │   ├── 직원 목록
    │   ├── 직원 초대
    │   ├── 역할 변경
    │   ├── 담당 어르신 배정
    │   └── 직원 비활성화/삭제
    ├── 알림 설정
    │   ├── 알림 유형별 On/Off
    │   ├── 방해금지 시간 설정
    │   └── 긴급 알림 (항상 수신 - 변경 불가)
    └── 계정 설정
        ├── 프로필 수정
        ├── 비밀번호 변경
        ├── 로그아웃
        └── 회원 탈퇴
```

---

### 3.2 보호자 앱 화면 트리

```
로그인 / 가입
├── 전화번호 로그인 (OTP)
├── 초대 코드 입력
└── 앱 튜토리얼

홈 대시보드
├── 어르신 정보 요약 카드
│   ├── 어르신 사진 + 이름
│   ├── 오늘의 컨디션 (좋음/보통/안좋음)
│   ├── 마지막 일과 보고 미리보기
│   └── 복수 어르신 시 스와이프로 전환
│
├── 오늘의 알림 피드
│   ├── 시간순 알림 카드
│   │   ├── 송영 알림 (탑승/도착)
│   │   ├── 복약 알림 (완료/거부)
│   │   ├── 일과 보고 알림
│   │   └── 시설 공지
│   └── 전체 보기 → 알림 탭 이동
│
├── 일과 보고
│   ├── 오늘의 일과 보고
│   │   ├── 컨디션/기분/식욕 요약
│   │   ├── 식사량 (아침/점심/간식)
│   │   ├── 프로그램 참여 내역
│   │   ├── 활동 사진
│   │   └── 담당자 메모
│   ├── 과거 일과 보고
│   │   ├── 달력 뷰 (날짜 선택)
│   │   ├── 리스트 뷰 (스크롤)
│   │   └── 보고서 상세
│   └── 주간/월간 요약
│       ├── 컨디션 추이 그래프
│       ├── 식욕 추이 그래프
│       └── 프로그램 참여율
│
├── 송영
│   ├── 오늘 송영 현황
│   │   ├── 등원 상태 (대기/탑승/도착)
│   │   ├── 하원 상태 (대기/탑승/도착)
│   │   └── 실시간 차량 위치 (지도)
│   ├── 실시간 위치 추적
│   │   ├── 네이버 지도 위 차량 마커
│   │   ├── ETA (예상 도착 시간)
│   │   └── 운전기사 전화 연결
│   └── 송영 이력
│       ├── 날짜별 탑승/하차 시간
│       └── 특이사항
│
├── 복약
│   ├── 오늘 복약 현황
│   │   ├── 시간대별 복약 상태
│   │   ├── 복약 사진
│   │   └── 특이사항
│   ├── 복약 이력
│   │   ├── 날짜별 복약 기록
│   │   └── 복약률 통계
│   └── 약 정보
│       ├── 현재 처방 약 목록
│       ├── 약 상세 정보 (이름, 용량, 용법, 효과)
│       └── 복약 시간표
│
├── 건강 기록
│   ├── 활력 징후 추이
│   │   ├── 혈압 그래프
│   │   ├── 체온 그래프
│   │   ├── 체중 그래프
│   │   └── 기간 선택 (1주/1개월/3개월)
│   ├── 건강 이벤트 이력
│   │   ├── 긴급 상황 기록
│   │   ├── 병원 방문 기록
│   │   └── 상태 변화 기록
│   └── 건강 리포트
│       └── 월간 건강 요약 PDF 다운로드
│
├── 소통
│   ├── 대화 목록
│   │   ├── 담당 직원과의 대화
│   │   ├── 시설 관리자와의 대화
│   │   └── 안읽음 배지
│   ├── 1:1 채팅
│   │   ├── 텍스트 메시지
│   │   ├── 사진 전송
│   │   ├── 읽음 확인
│   │   └── 긴급 메시지 버튼
│   ├── 공지사항
│   │   ├── 시설 공지 목록
│   │   └── 공지 상세
│   └── 가정통신문
│       ├── 수신 통신문 목록
│       └── 통신문 상세
│
├── 프로그램
│   ├── 주간 프로그램 일정
│   │   ├── 요일별 프로그램 목록
│   │   └── 프로그램 상세 (시간, 내용, 목적)
│   └── 참여 기록
│       ├── 프로그램별 참여 여부
│       └── 활동 사진
│
├── 식단
│   ├── 주간 식단표
│   │   ├── 일자별 메뉴 (아침/점심/저녁/간식)
│   │   └── 식단 사진
│   └── 식사량 기록
│       └── 일자별 식사량 (전체/2/3/1/2/1/3/거의안먹음)
│
├── 알림
│   ├── 전체 알림 목록 (시간순)
│   ├── 유형별 필터
│   │   ├── 긴급 (빨간 표시)
│   │   ├── 송영
│   │   ├── 복약
│   │   ├── 일과 보고
│   │   └── 공지/기타
│   └── 읽음/안읽음 필터
│
└── 설정 (마이페이지)
    ├── 내 정보
    │   ├── 이름, 전화번호
    │   └── 어르신과의 관계
    ├── 연결된 어르신 관리
    │   ├── 어르신 목록
    │   ├── 초대 코드 추가 입력 (어르신 추가 연결)
    │   └── 연결 해제
    ├── 알림 설정
    │   ├── 알림 유형별 On/Off
    │   │   ├── 일과 보고 알림
    │   │   ├── 복약 알림
    │   │   ├── 송영 알림
    │   │   ├── 긴급 알림 (해제 불가)
    │   │   └── 공지사항 알림
    │   └── 방해금지 시간 설정
    ├── 앱 정보
    │   ├── 버전 정보
    │   ├── 이용약관
    │   ├── 개인정보처리방침
    │   └── 오픈소스 라이선스
    ├── 고객센터
    │   ├── FAQ
    │   ├── 1:1 문의
    │   └── 전화 문의
    ├── 로그아웃
    └── 회원 탈퇴
```

---

### 3.3 화면 전환 다이어그램 (주요 흐름)

```
[보호자 앱 주요 네비게이션]

    ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐
    │   홈     │  │ 일과보고  │  │   소통   │  │   알림   │  │  설정    │
    │          │  │          │  │          │  │          │  │(마이페이지)│
    └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘
         │             │             │             │             │
    ─────┴─────────────┴─────────────┴─────────────┴─────────────┴─────
                              하단 탭 바 (Bottom Navigation)


[시설 앱 주요 네비게이션]

    ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐
    │   홈     │  │ 어르신   │  │   소통   │  │   알림   │  │  설정    │
    │ 대시보드  │  │  관리    │  │          │  │          │  │          │
    └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘
         │             │             │             │             │
    ─────┴─────────────┴─────────────┴─────────────┴─────────────┴─────
                              하단 탭 바 (Bottom Navigation)
                         + 중앙 FAB (빠른 사진 촬영 / 긴급 신고)
```

---

## 4. 알림 설계

### 4.1 알림 유형 전체 정리

| 번호 | 알림 유형 | 트리거 조건 | 발신 | 수신 | 우선순위 | 채널 |
|------|-----------|-------------|------|------|----------|------|
| A01 | **긴급 상황 발생** | 직원이 긴급 상황 신고 | 시스템 | 보호자, 관리자 | **최고** | 푸시 + SMS + 전화 |
| A02 | **긴급 상황 업데이트** | 긴급 상황 상태 변경 | 시스템 | 보호자 | **최고** | 푸시 + SMS |
| A03 | **긴급 상황 종료** | 긴급 상황 종결 처리 | 시스템 | 보호자 | 높음 | 푸시 |
| B01 | **송영 차량 출발** | 운전기사 운행 시작 | 시스템 | 보호자 | 보통 | 푸시 |
| B02 | **송영 차량 도착 (자택)** | GPS 도착 감지 | 시스템 | 보호자 | 보통 | 푸시 |
| B03 | **어르신 탑승** | 운전기사 탑승 체크 | 시스템 | 보호자 | 보통 | 푸시 |
| B04 | **시설 도착** | GPS 시설 도착 감지 | 시스템 | 보호자 | 보통 | 푸시 |
| B05 | **하원 출발** | 운전기사 하원 운행 시작 | 시스템 | 보호자 | 보통 | 푸시 |
| B06 | **자택 도착 (하원)** | GPS 자택 도착 감지 | 시스템 | 보호자 | 보통 | 푸시 |
| B07 | **등원 불참** | 운전기사 불참 처리 | 시스템 | 보호자, 시설 | 보통 | 푸시 |
| C01 | **복약 시간 도래** | 설정된 복약 시간 | 시스템 | 담당 직원 | 높음 | 푸시 + 인앱 |
| C02 | **복약 완료** | 직원 복약 기록 | 시스템 | 보호자 | 보통 | 푸시 |
| C03 | **복약 거부** | 직원 복약 거부 기록 | 시스템 | 보호자 | 높음 | 푸시 + SMS |
| C04 | **미복약 리마인더** | 복약 시간 +10분 | 시스템 | 담당 직원 | 높음 | 푸시 |
| C05 | **미복약 에스컬레이션** | 복약 시간 +30분 | 시스템 | 관리자, 보호자 | 높음 | 푸시 + SMS |
| D01 | **일과 보고 도착** | 직원 보고서 발송 | 시스템 | 보호자 | 보통 | 푸시 |
| D02 | **일과 보고 리마인더** | 16:00 (미작성 시) | 시스템 | 담당 직원 | 보통 | 푸시 |
| D03 | **일과 보고 미작성** | 17:30 (미작성 시) | 시스템 | 관리자 | 높음 | 푸시 |
| E01 | **보호자 메시지 수신** | 보호자 메시지 발송 | 시스템 | 담당 직원 | 보통 | 푸시 + 인앱 |
| E02 | **시설 메시지 수신** | 직원 메시지 발송 | 시스템 | 보호자 | 보통 | 푸시 + 인앱 |
| E03 | **보호자 긴급 메시지** | 보호자 긴급 메시지 | 시스템 | 관리자 + 전원 | 높음 | 푸시 + SMS |
| E04 | **메시지 미응답** | 24시간 미응답 | 시스템 | 관리자 | 보통 | 푸시 |
| F01 | **공지사항 등록** | 관리자 공지 등록 | 시스템 | 보호자 (대상) | 낮음 | 푸시 |
| F02 | **가정통신문 발송** | 관리자 통신문 발송 | 시스템 | 보호자 (대상) | 낮음 | 푸시 |
| G01 | **초대 코드 발송** | 관리자 초대 코드 생성 | 시스템 | 보호자 | 보통 | SMS |
| G02 | **직원 초대** | 관리자 직원 초대 | 시스템 | 직원 | 보통 | 이메일/SMS |
| G03 | **시설 승인 완료** | 관리자 승인 처리 | 시스템 | 시설 관리자 | 높음 | 푸시 + 이메일 |
| G04 | **시설 승인 거절** | 관리자 거절 처리 | 시스템 | 시설 관리자 | 높음 | 푸시 + 이메일 |
| H01 | **건강 기록 변화** | 활력 징후 이상 범위 | 시스템 | 간호사, 관리자 | 높음 | 푸시 |
| H02 | **프로그램 일정 알림** | 프로그램 시작 15분 전 | 시스템 | 담당 직원 | 낮음 | 푸시 |
| H03 | **식단 등록 알림** | 주간 식단 미등록 시 | 시스템 | 관리자 | 낮음 | 푸시 |

### 4.2 우선순위별 알림 동작

| 우선순위 | 알림음 | 무음 모드 | 배너 표시 | 알림 센터 | 배지 |
|----------|--------|-----------|-----------|-----------|------|
| **최고** | 사이렌 알림음 (커스텀) | **무시 (강제 알림)** | 풀스크린 인텐트 | O | O |
| **높음** | 기본 알림음 | 무시 (진동) | 헤드업 알림 | O | O |
| **보통** | 기본 알림음 | 준수 (무음) | 헤드업 알림 | O | O |
| **낮음** | 무음 | 준수 (무음) | X | O | O |

### 4.3 알림 채널별 동작

```
┌────────────────────────────────────────────────────────────────────┐
│                        알림 채널 구조                                │
│                                                                    │
│  ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐ │
│  │  인앱    │     │  푸시    │     │   SMS    │     │   전화   │ │
│  │ 알림    │     │  알림    │     │  알림    │     │  연결    │ │
│  └────┬─────┘     └────┬─────┘     └────┬─────┘     └────┬─────┘ │
│       │                │                │                │       │
│  앱 사용 중       앱 미사용 시       푸시 미확인 시     SMS 미확인 시│
│  실시간 표시      OS 푸시 알림       NHN SMS API       자동 전화    │
│  (Realtime)      (FCM)             발송               연결 시도    │
│                                                                    │
│  비용: 무료       비용: 무료        비용: 건당 과금     비용: 건당   │
│                                    (~15원/건)          과금         │
└────────────────────────────────────────────────────────────────────┘
```

### 4.4 알림 문구 템플릿

| 알림 ID | 제목 | 본문 예시 |
|---------|------|-----------|
| A01 | "[시설명] 긴급 상황" | "[어르신]님 긴급 상황 발생 - 낙상. 자세한 내용을 확인해주세요." |
| B03 | "[시설명] 등원 알림" | "[어르신]님이 송영 차량에 탑승하셨습니다." |
| B04 | "[시설명] 도착 알림" | "[어르신]님이 [시설명]에 안전하게 도착했습니다." |
| C02 | "[시설명] 복약 알림" | "[어르신]님 아침 복약이 완료되었습니다." |
| C03 | "[시설명] 복약 알림" | "[어르신]님이 아침 약 복용을 거부하셨습니다. 확인해주세요." |
| D01 | "[시설명] 일과 보고" | "[어르신]님의 오늘 일과 보고가 도착했습니다." |
| E02 | "[시설명] 새 메시지" | "[직원명]님이 메시지를 보냈습니다." |

### 4.5 알림 설정 (보호자 커스터마이징)

```
┌──────────────────────────────────────┐
│          알림 설정                     │
│  ────────────────────────────────    │
│                                      │
│  ── 긴급 알림 ─────────────────     │
│  긴급 상황 알림        [항상 켜짐] 🔒 │
│  (해제할 수 없습니다)                 │
│                                      │
│  ── 송영 알림 ─────────────────     │
│  차량 출발 알림        [  ON  ]      │
│  탑승/하차 알림        [  ON  ]      │
│  시설 도착 알림        [  ON  ]      │
│                                      │
│  ── 복약 알림 ─────────────────     │
│  복약 완료 알림        [  ON  ]      │
│  복약 거부/미복약 알림  [  ON  ]     │
│                                      │
│  ── 일과 보고 ─────────────────     │
│  일과 보고 도착 알림    [  ON  ]     │
│                                      │
│  ── 소통 ──────────────────────     │
│  메시지 수신 알림      [  ON  ]      │
│  공지사항 알림         [  ON  ]      │
│                                      │
│  ── 방해금지 시간 ─────────────     │
│  사용                  [ OFF  ]      │
│  시작 시간: [22:00]                  │
│  종료 시간: [07:00]                  │
│  (긴급 알림은 방해금지 시간에도       │
│   수신됩니다)                        │
│                                      │
└──────────────────────────────────────┘
```

---

## 5. 에러 핸들링 & 엣지 케이스

### 5.1 네트워크 오프라인 시

```
┌──────────────────────────────────────────────────────────────────────┐
│                    오프라인 대응 전략                                   │
│                                                                      │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ 오프라인    │───>│ 로컬 저장   │───>│ 네트워크    │───> 자동 동기화│
│  │ 감지       │    │ (큐잉)      │    │ 복구 감지   │              │
│  └─────────────┘    └─────────────┘    └─────────────┘              │
└──────────────────────────────────────────────────────────────────────┘
```

| 기능 | 오프라인 동작 | 로컬 저장 | 복구 후 동기화 |
|------|-------------|-----------|---------------|
| **복약 기록** | 기록 가능 (로컬 DB 저장) | Hive/Isar에 큐잉 | 자동 업로드 + 시간 보정 |
| **일과 보고 작성** | 작성 가능 (임시 저장) | 텍스트 + 사진 로컬 저장 | 자동 발송 |
| **사진 촬영** | 촬영 가능 | 로컬 갤러리 저장 | 자동 업로드 |
| **송영 GPS 추적** | **제한적** (로컬 기록) | 좌표 로컬 저장 | 경로 일괄 업로드 (실시간 추적 불가) |
| **메시지 발송** | 발송 대기 (큐잉) | 로컬 메시지 큐 | 순서대로 자동 발송 |
| **실시간 위치 확인 (보호자)** | **불가** | - | 복구 후 즉시 갱신 |
| **긴급 상황 신고** | **제한적** (SMS 폴백) | 시스템 SMS 발송 시도 | 앱 기록 동기화 |
| **알림 수신** | **불가** (앱 진입 시 일괄 수신) | - | 미수신 알림 일괄 표시 |

#### 오프라인 UI 처리

```
┌──────────────────────────────────────┐
│  ⚠ 인터넷 연결이 끊어졌습니다         │
│  ─────────────────────────────       │
│  작성한 내용은 자동 저장되며,          │
│  연결이 복구되면 자동으로              │
│  전송됩니다.                          │
│                                      │
│  [대기 중인 항목: 3건]               │
│  - 복약 기록 (08:32)                 │
│  - 사진 업로드 (09:15)               │
│  - 메시지 (10:02)                    │
│                                      │
│  마지막 동기화: 08:30                 │
└──────────────────────────────────────┘
```

#### 동기화 충돌 처리

| 충돌 유형 | 해결 전략 | 설명 |
|-----------|-----------|------|
| 같은 어르신 복약 기록 중복 | 타임스탬프 우선 | 먼저 기록된 것 유지, 나중 것 "중복 기록" 표시 |
| 메시지 순서 불일치 | 서버 타임스탬프 기준 정렬 | 클라이언트 시간 무시, 서버 시간 기준 |
| 어르신 정보 동시 수정 | 마지막 수정 우선 (Last Write Wins) | 충돌 시 관리자에게 알림 |

---

### 5.2 GPS 불가 시

```
GPS 신호 감지 실패
        │
        ├── 1차: 재시도 (5초 간격, 3회)
        │
        ├── 2차: Wi-Fi 기반 대략적 위치 사용
        │         "대략적 위치를 사용 중입니다" 표시
        │
        ├── 3차: 수동 위치 입력 요청
        │         "현재 위치를 직접 선택해주세요" (지도에서 핀 선택)
        │
        └── 4차: 위치 없이 진행 (기록에 "위치 정보 없음" 표시)
              보호자에게 "위치 정보 없이 기록됨" 안내
```

| 기능 | GPS 불가 시 동작 | 대체 수단 |
|------|-----------------|-----------|
| **송영 실시간 위치** | "위치 정보를 가져올 수 없습니다" 표시 | Wi-Fi 위치 / 수동 도착 체크 |
| **탑승/하차 자동 감지** | 자동 감지 비활성화 | 수동 "도착" 버튼으로 대체 |
| **운행 경로 기록** | 부분 기록 (가용 구간만) | "일부 경로 누락" 표시 |

---

### 5.3 어르신 등하원 불참 시

```
┌──────────────────────────────────────────────────────────────────────┐
│                      등원 불참 처리 플로우                              │
│                                                                      │
│  사전 불참 통보 (보호자)              당일 불참 (운전기사 현장 확인)    │
│         │                                    │                       │
│         ▼                                    ▼                       │
│  보호자가 앱에서                     운전기사가 자택 도착              │
│  "내일 불참" 등록                    어르신/보호자 응답 없음           │
│         │                                    │                       │
│         ▼                                    ▼                       │
│  시설에 자동 알림                    운전기사 "불참" 처리              │
│  송영 스케줄에서 제외                사유 선택 (미응답/외출/기타)      │
│         │                                    │                       │
│         ▼                                    ▼                       │
│  보호자에게 확인 알림               보호자에게 불참 확인 알림          │
│  "불참이 등록되었습니다"            "등원 불참 처리되었습니다"         │
│                                              │                       │
│                                              ▼                       │
│                                    시설 관리자에게 알림               │
│                                    "미응답 불참" 보고                 │
└──────────────────────────────────────────────────────────────────────┘
```

#### 불참 유형별 처리

| 불참 유형 | 처리 시점 | 처리 주체 | 후속 조치 |
|-----------|----------|-----------|-----------|
| **사전 통보 (전날까지)** | D-1 이전 | 보호자 (앱) | 송영 스케줄 자동 제외, 식단/복약 스킵 |
| **당일 아침 연락** | 당일 07:00 이전 | 보호자 (메시지/전화) | 직원이 수동 불참 처리 |
| **현장 미응답** | 운전기사 도착 시 | 운전기사 | 대기 5분 → 보호자 전화 → 불참 처리 |
| **연속 불참 (3일 이상)** | 3일차 | 시스템 자동 | 관리자에게 "연속 불참 알림", 보호자 확인 요청 |

#### 불참 시 연관 데이터 처리

```
불참 등록 시 자동 처리:
  ├── 송영 스케줄에서 제외
  ├── 복약 스케줄 "불참" 상태로 변경 (미복약과 구분)
  ├── 일과 보고 대상에서 제외
  ├── 프로그램 참여 "불참" 자동 기록
  └── 식단 준비 인원에서 제외
```

---

### 5.4 보호자 복수 등록 시

한 어르신에 대해 여러 보호자가 연결되는 경우의 처리입니다.

```
                    ┌──────────────┐
                    │  어르신 (1명) │
                    └──────┬───────┘
                           │
              ┌────────────┼────────────┐
              │            │            │
        ┌─────┴─────┐ ┌───┴───┐ ┌─────┴─────┐
        │ 주 보호자  │ │부 보호자│ │부 보호자  │
        │ (자녀 A)  │ │(자녀 B)│ │ (배우자)  │
        └───────────┘ └───────┘ └───────────┘
```

#### 복수 보호자 권한 체계

| 기능 | 주 보호자 | 부 보호자 |
|------|:---:|:---:|
| 모든 알림 수신 | O | O (설정에 따라) |
| 일과 보고 수신 | O | O |
| 긴급 알림 수신 | O | O (필수) |
| 1:1 채팅 | O | O |
| 어르신 정보 수정 요청 | O | X |
| 다른 보호자 초대 | O | X |
| 보호자 연결 해제 | O (본인+부보호자) | O (본인만) |
| 주 보호자 변경 | O | X |

#### 복수 보호자 등록 플로우

```
1. 최초 등록된 보호자 → 자동으로 "주 보호자" 지정
2. 추가 보호자 등록 → "부 보호자"로 지정
3. 주 보호자 변경:
   - 주 보호자가 앱에서 "주 보호자 위임" 선택
   - 또는 시설 관리자가 관리 화면에서 변경
4. 알림 수신 범위:
   - 주 보호자: 모든 알림 기본 수신
   - 부 보호자: 긴급 알림 필수, 나머지는 선택
```

#### 복수 보호자 메시지 처리

| 상황 | 처리 방식 |
|------|-----------|
| 시설 → 보호자 메시지 | 주 보호자에게 발송 (부 보호자는 읽기 가능) |
| 보호자 → 시설 메시지 | 각 보호자별 개별 대화방 (서로의 대화 미공유) |
| 공지사항/가정통신문 | 전체 보호자에게 동시 발송 |
| 긴급 상황 알림 | 전체 보호자에게 동시 발송 |

---

### 5.5 직원 교대 시

근무 교대 시 담당 어르신 및 업무 인수인계 처리입니다.

```
┌──────────────────────────────────────────────────────────────────────┐
│                       직원 교대 플로우                                  │
│                                                                      │
│  퇴근 직원 (A)                          출근 직원 (B)                 │
│       │                                      │                       │
│       ▼                                      ▼                       │
│  인수인계 메모 작성                     앱 로그인                      │
│  - 특이사항                            - 오늘 담당 어르신 확인         │
│  - 미완료 업무                         - 인수인계 메모 확인            │
│  - 주의 필요 어르신                    - 미완료 업무 이어받기          │
│       │                                      │                       │
│       ▼                                      ▼                       │
│  "교대 완료" 처리                      "인수 확인" 처리               │
│  - 담당 어르신 이관                    - 담당 시작                    │
│  - 퇴근 처리                           - 알림 수신 시작               │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

#### 교대 시 데이터 처리

| 항목 | 처리 방식 |
|------|-----------|
| **미완료 복약** | 다음 교대 직원에게 자동 이관, "미완료" 배지 표시 |
| **미작성 일과 보고** | 퇴근 직원에게 작성 요청 알림 → 미작성 시 다음 직원에게 이관 |
| **진행 중 대화** | 보호자에게 "담당 직원이 변경되었습니다" 안내 메시지 |
| **긴급 상황 처리 중** | 교대 불가 (긴급 상황 종료 시까지 담당 유지) |
| **송영 중** | 운행 완료 시까지 담당 유지 |

#### 인수인계 메모 화면

```
┌──────────────────────────────────────┐
│        인수인계 메모 작성              │
│  ────────────────────────────────    │
│                                      │
│  퇴근자: 이OO 요양보호사             │
│  교대자: 박OO 요양보호사             │
│  시간: 2026-02-06 14:00             │
│                                      │
│  ── 특이사항 ──────────────────     │
│  ┌──────────────────────────────┐   │
│  │ 김OO 어르신 오후 컨디션 저하  │   │
│  │ 정OO 어르신 점심 약 거부함    │   │
│  └──────────────────────────────┘   │
│                                      │
│  ── 미완료 업무 ───────────────     │
│  [ ] 정OO 어르신 오후 복약 재시도    │
│  [ ] 박OO 어르신 보호자 전화 회신    │
│                                      │
│  ── 주의 필요 어르신 ──────────     │
│  [!] 김OO - 오후부터 두통 호소       │
│  [!] 정OO - 점심 약 미복용           │
│                                      │
│  [저장 및 교대 완료]                  │
│                                      │
└──────────────────────────────────────┘
```

---

### 5.6 기타 엣지 케이스

#### 앱 강제 종료 / 크래시 시

| 상황 | 처리 |
|------|------|
| 복약 기록 중 크래시 | 자동 임시 저장 (3초 간격), 재진입 시 복구 안내 |
| 일과 보고 작성 중 크래시 | 자동 임시 저장, 재진입 시 "이어서 작성하시겠습니까?" 팝업 |
| 사진 업로드 중 크래시 | 업로드 큐에 남아있음, 재진입 시 자동 재시도 |
| 송영 운행 중 크래시 | GPS 기록 일시 중단, 재진입 시 자동 운행 재개 |

#### 기기 저장공간 부족 시

```
저장공간 부족 감지 (500MB 미만)
        │
        ├── 경고: "저장공간이 부족합니다. 사진 업로드 후 캐시를 정리해주세요"
        │
        ├── 사진 촬영: 해상도 자동 하향 (1080p → 720p)
        │
        ├── 캐시 정리 안내: "설정 > 캐시 정리"로 유도
        │
        └── 극도의 부족 (100MB 미만): 사진 촬영 차단, 텍스트만 기록 가능
```

#### 보호자 앱 삭제 후 재설치 시

```
재설치 → 전화번호 인증 → 기존 계정 자동 연결 → 데이터 복구 (서버 기반)
         └→ 로컬 캐시만 초기화, 서버 데이터 정상 유지
         └→ 알림 설정은 초기값으로 리셋 (재설정 안내)
```

#### 어르신 시설 퇴소 시

```
관리자가 "퇴소 처리"
        │
        ├── 어르신 상태: "퇴소"로 변경
        ├── 보호자에게 알림: "[어르신] 퇴소 처리되었습니다"
        ├── 보호자 앱: 해당 어르신 정보 "과거 기록"으로 이동 (90일간 조회 가능)
        ├── 데이터 보관: 법적 의무 기간 (5년) 동안 서버 보관
        ├── 연결 보호자: 다른 연결 어르신 없으면 앱 기능 비활성화
        └── 90일 후: 보호자 앱에서 데이터 접근 차단 (관리자 요청 시 제공)
```

#### 동시 접속 / 동일 계정 다중 기기

| 상황 | 정책 |
|------|------|
| 보호자 계정 2대 기기 동시 사용 | 허용 (읽기/알림 모든 기기) |
| 직원 계정 2대 기기 동시 사용 | 마지막 로그인 기기만 활성 (이전 기기 자동 로그아웃) |
| 관리자 계정 웹+앱 동시 사용 | 허용 (데이터 실시간 동기화) |

---

## 부록: 플로우 간 연결 관계

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      SilverSync 핵심 플로우 연결도                       │
│                                                                         │
│                        ┌──────────────┐                                 │
│                        │   온보딩     │                                 │
│                        │ (시설/보호자/│                                 │
│                        │   직원)     │                                 │
│                        └──────┬───────┘                                 │
│                               │                                         │
│                               ▼                                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐               │
│  │  송영    │──│  복약    │──│ 일과보고  │──│   소통   │               │
│  │  관리    │  │  관리    │  │          │  │          │               │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘               │
│       │             │             │             │                       │
│       └─────────────┴──────┬──────┴─────────────┘                       │
│                            │                                            │
│                            ▼                                            │
│                     ┌──────────────┐                                    │
│                     │  알림 시스템  │                                    │
│                     │ (푸시/SMS/   │                                    │
│                     │  인앱/전화)  │                                    │
│                     └──────┬───────┘                                    │
│                            │                                            │
│                            ▼                                            │
│                     ┌──────────────┐                                    │
│                     │  긴급 상황   │                                    │
│                     │  대응 시스템  │                                    │
│                     └──────────────┘                                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

> **문서 이력**
>
> | 버전 | 날짜 | 작성자 | 변경 사항 |
> |------|------|--------|-----------|
> | v1.0 | 2026-02-06 | - | 최초 작성 |
